{"version":3,"file":"modal_manager.min.js","sources":["../src/modal_manager.js"],"sourcesContent":["/**\n * Modal Manager Module.\n *\n * Este módulo gestiona la apertura y cierre de un modal con animación fade,\n * simulando el comportamiento de Bootstrap.\n *\n * @module     theme_fng/modal_manager\n * @copyright  2025 fng\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    'use strict';\n\n    var ModalManager = function(modalSelector, triggerSelector) {\n        this.$modal = $(modalSelector);\n        this.$trigger = $(triggerSelector);\n        this.init();\n    };\n\n    ModalManager.prototype.createBackdrop = function() {\n        var $backdrop = $('<div class=\"modal-backdrop fade\"></div>');\n        $('body').append($backdrop);\n        // Forzar reflow para activar la transición.\n        void $backdrop[0].offsetWidth;\n        $backdrop.addClass('show');\n        return $backdrop;\n    };\n\n    ModalManager.prototype.openModal = function(e) {\n        e.preventDefault();\n        var $modal = this.$modal;\n        var $backdrop = this.createBackdrop();\n        $modal.css('display', 'block').hide().fadeIn(300, function() {\n            $modal.addClass('show')\n                  .attr('aria-modal', 'true')\n                  .removeAttr('aria-hidden');\n        });\n        $modal.data('backdrop', $backdrop);\n    };\n\n    ModalManager.prototype.closeModal = function(e) {\n        e.preventDefault();\n        var $modal = this.$modal;\n        var $backdrop = $modal.data('backdrop');\n        $modal.removeClass('show')\n              .attr('aria-hidden', 'true')\n              .removeAttr('aria-modal');\n        $modal.fadeOut(300, function() {\n            $modal.css('display', 'none');\n        });\n        if ($backdrop) {\n            $backdrop.removeClass('show');\n            setTimeout(function() {\n                $backdrop.remove();\n            }, 150);\n        }\n    };\n\n    ModalManager.prototype.init = function() {\n        var self = this;\n        if (this.$trigger.length && this.$modal.length) {\n            this.$trigger.on('click', function(e) {\n                self.openModal(e);\n            });\n            this.$modal.find('[data-dismiss=\"modal\"]').on('click', function(e) {\n                self.closeModal(e);\n            });\n            this.$modal.on('click', function(e) {\n                if ($(e.target).is(self.$modal)) {\n                    self.closeModal(e);\n                }\n            });\n        }\n    };\n\n    return {\n        /**\n         * Inicializa el ModalManager.\n         *\n         * @param {string} modalSelector    Selector del modal.\n         * @param {string} triggerSelector  Selector del disparador del modal.\n         * @return {ModalManager} Instancia del ModalManager.\n         */\n        init: function(modalSelector, triggerSelector) {\n            return new ModalManager(modalSelector, triggerSelector);\n        }\n    };\n});\n"],"names":["define","$","ModalManager","modalSelector","triggerSelector","$modal","$trigger","init","prototype","createBackdrop","$backdrop","append","offsetWidth","addClass","openModal","e","preventDefault","this","css","hide","fadeIn","attr","removeAttr","data","closeModal","removeClass","fadeOut","setTimeout","remove","self","length","on","find","target","is"],"mappings":";;;;;;;;;;AAUAA,qCAAO,CAAC,WAAW,SAASC,OAGpBC,aAAe,SAASC,cAAeC,sBAClCC,OAASJ,EAAEE,oBACXG,SAAWL,EAAEG,sBACbG,eAGTL,aAAaM,UAAUC,eAAiB,eAChCC,UAAYT,EAAE,kDAClBA,EAAE,QAAQU,OAAOD,WAEZA,UAAU,GAAGE,YAClBF,UAAUG,SAAS,QACZH,WAGXR,aAAaM,UAAUM,UAAY,SAASC,GACxCA,EAAEC,qBACEX,OAASY,KAAKZ,OACdK,UAAYO,KAAKR,iBACrBJ,OAAOa,IAAI,UAAW,SAASC,OAAOC,OAAO,KAAK,WAC9Cf,OAAOQ,SAAS,QACTQ,KAAK,aAAc,QACnBC,WAAW,kBAEtBjB,OAAOkB,KAAK,WAAYb,YAG5BR,aAAaM,UAAUgB,WAAa,SAAST,GACzCA,EAAEC,qBACEX,OAASY,KAAKZ,OACdK,UAAYL,OAAOkB,KAAK,YAC5BlB,OAAOoB,YAAY,QACZJ,KAAK,cAAe,QACpBC,WAAW,cAClBjB,OAAOqB,QAAQ,KAAK,WAChBrB,OAAOa,IAAI,UAAW,WAEtBR,YACAA,UAAUe,YAAY,QACtBE,YAAW,WACPjB,UAAUkB,WACX,OAIX1B,aAAaM,UAAUD,KAAO,eACtBsB,KAAOZ,KACPA,KAAKX,SAASwB,QAAUb,KAAKZ,OAAOyB,cAC/BxB,SAASyB,GAAG,SAAS,SAAShB,GAC/Bc,KAAKf,UAAUC,WAEdV,OAAO2B,KAAK,0BAA0BD,GAAG,SAAS,SAAShB,GAC5Dc,KAAKL,WAAWT,WAEfV,OAAO0B,GAAG,SAAS,SAAShB,GACzBd,EAAEc,EAAEkB,QAAQC,GAAGL,KAAKxB,SACpBwB,KAAKL,WAAWT,QAMzB,CAQHR,KAAM,SAASJ,cAAeC,wBACnB,IAAIF,aAAaC,cAAeC"}