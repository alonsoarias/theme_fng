{{> theme_fng/head}}

<body {{{ bodyattributes }}} style="{{loginbackground}}">
    <!-- Contenedor principal centrado en el viewport -->
    <section class="vh-100 d-flex justify-content-center align-items-center">
        <div class="container">
            <div class="row d-flex flex-column flex-lg-row justify-content-center align-items-center h-100">
                <!-- Formulario de login centrado -->
                <div class="col-12 col-lg-4 mb-4 mb-lg-0 mx-auto">
                    <div class="card" style="border-radius: 1rem;">
                        <div class="card-body d-flex align-items-center justify-content-center" style="padding: 1rem;" aria-label="{{#str}}loginsection, theme_fng{{/str}}">
                            {{{ output.main_content }}}
                        </div>
                    </div>
                </div>
                <!-- Carrusel de imágenes (visible solo en pantallas grandes) -->
                {{#has_carousel}}
                <div class="col-12 col-lg-8 d-none d-lg-block">
                    <div class="card" style="border-radius: 24px;">
                        <div id="loginCarousel" class="carousel slide justify-content-center align-items-center" data-ride="carousel" data-interval="{{carouselinterval}}" aria-label="{{#str}}carousel, theme_fng{{/str}}">
                            <div class="carousel-inner" role="listbox">
                                {{#carouselimages}}
                                <div class="carousel-item {{#first}}active{{/first}}" aria-label="{{title}}">
                                    {{#has_link}}
                                    <a href="{{link}}" target="_blank">
                                        <img src="{{url}}" alt="{{title}}" class="d-block w-100" style="object-fit: cover; border-radius: 24px;">
                                    </a>
                                    {{/has_link}}
                                    {{^has_link}}
                                    <img src="{{url}}" alt="{{title}}" class="d-block w-100" style="object-fit: cover; border-radius: 24px;">
                                    {{/has_link}}
                                    {{#has_title}}
                                    <div class="carousel-caption d-none d-md-block">
                                        <h5>{{title}}</h5>
                                    </div>
                                    {{/has_title}}
                                </div>
                                {{/carouselimages}}
                            </div>
                            <!-- Controles del carrusel solo si existen múltiples slides -->
                            {{#multiple_slides}}
                            <a class="carousel-control-prev" href="#loginCarousel" role="button" data-slide="prev" aria-label="{{#str}}previous, theme_fng{{/str}}">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">{{#str}}previous, theme_fng{{/str}}</span>
                            </a>
                            <a class="carousel-control-next" href="#loginCarousel" role="button" data-slide="next" aria-label="{{#str}}next, theme_fng{{/str}}">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">{{#str}}next, theme_fng{{/str}}</span>
                            </a>
                            {{/multiple_slides}}
                        </div>
                    </div>
                </div>
                {{/has_carousel}}
            </div>
        </div>
    </section>

    <!-- Footer de créditos -->
    <div class="container">
        <div class="row justify-content-center my-3 my-footer-wrapper">
            <div class="my-footer panel col-12">
                <div class="card my-footer panel fixed-bottom">
                    <div class="row justify-content-center my-credit-footer-wrapper">
                        <div class="col-12 col-md-12 col-lg-8 col-xlg-6">
                            <div class="panel text-center my-credit">
                                <small class="text-muted-footer" id="my-credit">{{{my_credit}}}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        if(document.getElementById('loginCarousel')) {
            $('#loginCarousel').carousel({
                interval: {{carouselinterval}}
            });
        }
    });
    </script>

    <!-- Footer estándar de Moodle (oculto) -->
    <div class="d-none">
        {{{ output.standard_footer_html }}}
        {{{ output.standard_end_of_body_html }}}
    </div>
</body>
